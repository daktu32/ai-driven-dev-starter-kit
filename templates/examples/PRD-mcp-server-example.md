# PRD (Product Requirements Document) - Tabelog Search MCP Server

バージョン: 1.0  
作成日: 2025-06-27  
プロジェクトタイプ: mcp-server

## 1. プロダクト概要

### 1.1 プロダクト名
Tabelog Search MCP Server

### 1.2 プロダクトビジョン
「AIアシスタントが日本の美食文化を理解し、ユーザーのグルメ体験を最適化する世界を実現する」

### 1.3 プロダクトミッション  
「食べログデータをMCP経由で提供し、Claude等のAIアシスタントが地域・予算・料理ジャンルに応じた最適なレストラン推薦を行えるようにする」

### 1.4 ターゲットユーザー
- **プライマリーユーザー**: AIアシスタント開発者、Claude Codeユーザー
- **セカンダリーユーザー**: レストラン検索を頻繁に行う一般ユーザー
- **ユーザーペルソナ**: 技術に詳しく、グルメな開発者

## 2. 市場分析・競合分析

### 2.1 市場機会
- MCP（Model Context Protocol）エコシステムの成長
- AI アシスタントの普及に伴うツール需要増加
- 飲食店検索の高頻度利用

### 2.2 競合分析
| 競合 | 強み | 弱み | 差別化ポイント |
|------|------|------|----------------|
| 食べログAPI | 公式データ | 有料・制限厳しい | MCPプロトコル対応 |
| ぐるなびAPI | 豊富な店舗情報 | 古いデータ多い | リアルタイム性 |

### 2.3 ポジショニング
食べログデータに特化したMCPサーバーとして、AIアシスタントの日本グルメ検索デファクトスタンダードを目指す

## 3. ユーザーストーリー・ユースケース

### 3.1 メインユーザーストーリー

**As a** Claude Code ユーザー  
**I want** 「銀座で予算3000円以内の和食店を探して」と指示するだけで適切な店舗リストが得られる  
**So that** 手動でWebサイトを検索する手間を省き、AIアシスタントに任せられる

### 3.2 追加ユーザーストーリー
1. 特定エリアの高評価店舗を知りたい
2. 料理ジャンル別の人気店舗を比較したい
3. 営業時間や定休日も含めて総合的に判断したい

### 3.3 ユーザージャーニー
```
課題発生（食事場所探し） → Claude起動 → 自然言語で要求 → MCP経由で検索 → 結果確認 → 予約・来店
```

## 4. 機能要件

### 4.1 MVP機能 (必須)

| 機能名 | 説明 | 優先度 | 実装難易度 |
|--------|------|--------|------------|
| エリア別検索 | 駅名・地名による店舗検索 | High | Low |
| ジャンル絞り込み | 和食・洋食・中華等による絞り込み | High | Low |
| 予算範囲指定 | 価格帯による絞り込み | High | Medium |
| 評価・口コミ取得 | 食べログ評価と代表的な口コミ | High | Medium |

### 4.2 フューチャー機能 (将来実装)

| 機能名 | 説明 | 想定リリース |
|--------|------|-------------|
| リアルタイム空席情報 | 予約可能性の確認 | v2.0 |
| 個人化推薦 | ユーザーの過去履歴に基づく推薦 | v3.0 |

### 4.3 機能詳細仕様

#### 4.3.1 エリア別検索
- **目的**: 地理的条件による店舗絞り込み
- **入力**: 駅名、地名、住所、緯度経度
- **処理**: 食べログAPIを使用して範囲内店舗を取得
- **出力**: 店舗リスト（名前、住所、評価、ジャンル）
- **制約**: API呼び出し制限、取得件数上限

#### 4.3.2 ジャンル絞り込み
- **目的**: 料理の種類による絞り込み
- **入力**: 料理ジャンル（和食、洋食、中華等）
- **処理**: ジャンルマスターとの照合
- **出力**: 該当ジャンルの店舗のみ
- **制約**: ジャンル分類の粒度

## 5. 非機能要件

### 5.1 パフォーマンス要件
- **レスポンス時間**: MCP応答時間 < 3秒
- **スループット**: 100 req/min
- **可用性**: 99% uptime

### 5.2 セキュリティ要件
- **認証**: 食べログAPI キー管理
- **認可**: MCP クライアント認証
- **データ保護**: APIキーの環境変数管理

### 5.3 スケーラビリティ要件
- **ユーザー数**: 100 concurrent users
- **データ量**: キャッシュ 1GB
- **成長率**: 月10%成長想定

## 6. 技術要件 (mcp-server 固有)

### 6.1 技術スタック
- **言語**: TypeScript
- **ランタイム**: Node.js 18+
- **MCP SDK**: @modelcontextprotocol/sdk
- **HTTP Client**: axios
- **データベース**: なし（外部API呼び出しのみ）

### 6.2 アーキテクチャ方針
- **設計原則**: 軽量・高速・シンプル
- **データフロー**: MCP Request → 食べログAPI → Response
- **状態管理**: ステートレス、キャッシュのみ

### 6.3 開発環境・ツール
- **言語・フレームワーク**: TypeScript + MCP SDK
- **テスト戦略**: Jest（ユニットテスト）、API モック
- **CI/CD**: GitHub Actions

## 7. UI/UX要件

### 7.1 デザイン原則
- **使いやすさ**: 自然言語クエリでの直感的操作
- **アクセシビリティ**: MCPプロトコル準拠  
- **レスポンシブ**: サーバーサイドのため対象外

### 7.2 画面・機能フロー
```
[MCP通信フロー]
Claude → MCP Request → Tool Call → 食べログAPI → Response → Claude
```

### 7.3 UI コンポーネント
- MCPサーバーのためUI要件なし

## 8. データ要件

### 8.1 データモデル
```
Restaurant {
  id: string
  name: string
  address: string
  genre: string
  rating: number
  price_range: string
  business_hours: string
}
```

### 8.2 データフロー
- **入力データ**: 検索条件（エリア、ジャンル、予算）
- **処理データ**: 食べログAPI レスポンス
- **出力データ**: 構造化された店舗情報

### 8.3 データガバナンス
- **保存期間**: キャッシュ1時間
- **バックアップ**: 不要（外部API依存）
- **プライバシー**: 個人データ取扱いなし

## 9. 制約条件・リスク

### 9.1 技術的制約
- **食べログAPI制限**: 非公式のため安定性に課題
- **MCP仕様変更**: プロトコル進化への対応必要

### 9.2 ビジネス制約  
- **予算**: 個人開発レベル
- **期間**: 1週間以内
- **リソース**: 1人開発

### 9.3 リスク分析
| リスク | 影響度 | 発生確率 | 対応策 |
|--------|--------|----------|--------|
| API仕様変更 | High | Medium | 定期的な動作確認、フォールバック機能 |
| アクセス制限 | Medium | Low | レート制限、キャッシュ活用 |

## 10. 成功指標・KPI

### 10.1 ビジネスKPI
- **ユーザー獲得**: GitHub Star 50+
- **利用率**: 週次アクティブ利用
- **収益**: オープンソースのため該当なし

### 10.2 プロダクトKPI  
- **機能利用率**: 検索成功率 > 90%
- **ユーザー満足度**: Issue/Pull Request での好評価
- **パフォーマンス**: 応答時間 < 3秒

### 10.3 技術KPI
- **可用性**: Uptime > 99%
- **エラー率**: Error Rate < 1%
- **応答速度**: P95 < 3秒

## 11. ロードマップ・マイルストーン

### 11.1 開発フェーズ
| フェーズ | 期間 | 主要成果物 | 成功条件 |
|----------|------|------------|----------|
| MVP | 3日 | 基本検索機能 | エリア・ジャンル検索動作 |
| v1.0 | 1週間 | 完全版リリース | 全機能動作、ドキュメント完備 |
| v1.1 | 2週間 | 改善版 | ユーザーフィードバック反映 |

### 11.2 マイルストーン
- **M1**: MCPサーバー基盤実装完了（Day 1）
- **M2**: 食べログAPI連携実装完了（Day 2）
- **M3**: テスト・ドキュメント完了（Day 3）

---

## 付録

### A. 用語集
- **MCP**: Model Context Protocol - AIモデル用の標準プロトコル
- **食べログ**: 日本最大級のグルメサイト

### B. 参考資料
- [MCP公式仕様](https://modelcontextprotocol.io/): プロトコル詳細  
- [食べログAPI](https://tabelog.com/): データソース

### C. 変更履歴
| 日付 | バージョン | 変更内容 | 変更者 |
|------|------------|----------|--------|
| 2025-06-27 | 1.0 | 初版作成 | 開発者 |

---

**📝 このPRDについて**
- このPRDを完成させた後、Claude Code を起動してください
- Claude に「PRD.mdの内容に基づいてプロジェクトのスケルトンをアレンジして」と指示してください
- Claude が自動的にファイル構造、実装方針、技術選定を最適化します